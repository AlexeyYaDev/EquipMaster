<Window x:Class="EquipMaster.Views.Users.UserListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:EquipMaster.ViewModels"
        Title="Список пользователей"
        Height="500" Width="900"
        WindowStartupLocation="CenterOwner">
    <Window.DataContext>
        <vm:UserListViewModel/>
    </Window.DataContext>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Панель фильтров -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Vertical" Margin="0,0,5,0">
                <Label Content="ФИО"/>
                <TextBox Text="{Binding FilterFullName, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Vertical" Margin="0,0,5,0">
                <Label Content="Отдел"/>
                <TextBox Text="{Binding FilterDepartment, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>

            <StackPanel Grid.Column="2" Orientation="Vertical" Margin="0,0,5,0">
                <Label Content="Таб. номер"/>
                <TextBox Text="{Binding FilterPersonnelNumber, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>

            <StackPanel Grid.Column="3" Orientation="Vertical" Margin="0,0,5,0">
                <Label Content="Статус"/>
                <ComboBox SelectedValue="{Binding FilterBlocked, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Tag">
                    <ComboBoxItem Content="Все" Tag="{x:Null}"/>
                    <ComboBoxItem Content="Активные" Tag="False"/>
                    <ComboBoxItem Content="Заблокированные" Tag="True"/>
                </ComboBox>
            </StackPanel>

            <StackPanel Grid.Column="4" Orientation="Vertical" HorizontalAlignment="Right">
                <Label Content=" "/>
                <Button Content="Очистить" Command="{Binding ClearFilterCommand}" />
            </StackPanel>
        </Grid>

        <!-- Таблица пользователей -->
        <DataGrid Grid.Row="1" ItemsSource="{Binding UsersView}" SelectedItem="{Binding SelectedUser}"
                  AutoGenerateColumns="False" IsReadOnly="True" CanUserAddRows="False"
                  Margin="0,0,0,10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="60"/>
                <DataGridTextColumn Header="ФИО" Binding="{Binding FullName}" Width="2*"/>
                <DataGridTextColumn Header="Отдел" Binding="{Binding Department}" Width="2*"/>
                <DataGridTextColumn Header="Табельный номер" Binding="{Binding PersonnelNumber}" Width="*"/>
                <DataGridCheckBoxColumn Header="Заблокирован" Binding="{Binding IsBlocked}" Width="Auto"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Кнопки действий -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Создать" Width="80" Margin="0,0,5,0" Command="{Binding CreateCommand}"/>
            <Button Content="Редактировать" Width="100" Margin="0,0,5,0" Command="{Binding EditCommand}"/>
            <Button Content="Удалить" Width="80" Command="{Binding DeleteCommand}"/>
        </StackPanel>
    </Grid>
</Window>
